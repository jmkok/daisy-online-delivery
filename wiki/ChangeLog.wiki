#summary List of changes to the specification.

= From the Trial Use Draft to Current =

This is an aggregation of all the changes to the protocol made since the Draft for Trial Use (r566) was released 27 September 2009.  The current revision as of this writing is r764.

== API ==

Changes to `do-wsdl-10.wsdl`:

  * All `soap:operation`s now have the `soapAction` attribute set to `"/operationName"`.
  * Added note that `returnContent` must never return `false`, only `true` or a fault.
  * Added the `invalidOperation` fault to the signatures of `logOff` and `getContentMetadata`.
  * Calling `getKeyExchangeObject` with unauthorized keys in the `keyRing` results in an `invalidParameter` fault, not `invalidOperation`.
  * Datatype changes:
    * `getContentList/firstItem` changed from `xs:integer` to `xs:int`.
    * `getContentList/id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `getContentList/lastItem` changed from `xs:integer` to `xs:int`.

== Types ==

Changes to `do-types-10.xsd`:

  * Moved `contentMetadata@returnBy` to `resources@returnBy`. This means the Reading System does not need to check getContentMetadata both before and after issuance, and that `@returnBy` is not displayed before issuance. Added note that the attribute may not change while the Content is issued.
  * `label@xml:lang` is now required.  Added optional `label@dir` to indicate direction of text.
  * Added optional `resources@lastModifiedDate`.  Changed the definition of `contentItem@lastModifiedDate` to remove reference to most recent resource.
  * Allowed unlimited `contentMetadata/metadata/narrator`s, not just one.
  * Allowed empty `readingSystemAttributes/config/supportedContentFormats`.
  * `serviceAttributes/supportedUplinkAudioCodecs/codec` now refers to MIME types, not "canonical identifier strings".
  * Datatype changes:
    * `announcements/announcements/id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `contentList@firstItem` changed from `xs:integer` to `xs:int`.
    * `contentList@id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `contentList@lastItem` changed from `xs:integer` to `xs:int`.
    * `contentList@totalItems` changed from `xs:integer` to `xs:int`.
    * `contentList/contentItem/id` changed from `xs:ID` to `xs:string`.
    * `contentMetadata/metadata/size` changed from `xs:integer` to `xs:long`.
    * `inputQuestion@id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `label/audio@rangeBegin` changed from `xs:integer` to `xs:long`.
    * `label/audio@rangeEnd` changed from `xs:integer` to `xs:long`.
    * `label/audio@size` changed from `xs:integer` to `xs:long`.
    * `multipleChoiceQuestion@id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `multipleChoiceQuestion/choices/choice@id` changed from `xs:ID` to `xs:NMTOKEN`.
    * `questions/contentListRef` changed from `xs:ID` to `xs:NMTOKEN`.
    * `resource@size` changed from `xs:integer` to `xs:long`.
    * `serviceAttributes/service@id` changed from `xs:string` to `xs:NMTOKEN`.
    * `serviceAttributes/serviceProvider@id` changed from `xs:string` to `xs:NMTOKEN`.

== Bookmarks ==

Changes to `bookmark-2005-1.xsd`:  

  * Modified the bookmark xsd to eliminate empty complex types in the following element definitions:
   * uid
   * timeOffset
   * charOffset
   * ncxRef
   * text
 

== Documentation ==

  * Changed WSDL publishing requirements in Appendix A to have the published WSDL import the provided WSDL, rather than be a modified copy.
  * Added recommendation that menu state be retained for the duration of the session.
  * Added note that says that audio notes are not supported at all.  (Previously it had only mentioned it in setting bookmarks.)

== Pending ==

These changes are due to be made before the release of the final version: