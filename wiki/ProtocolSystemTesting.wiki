#summary A report on the testing of the DAISY Online protocol against the requirements and expectations.
#labels Phase-Requirements,Phase-QA,Report

<wiki:toc max_depth="1" />

= Introduction =

This report summarizes the system testing of the protocol, that is, the demonstration of how well the specification fulfils the requirements and expectations.  The requirements come from the modified RequirementsDocument.

Note that this is not conformance testing.  Some of these test will not be met even by some conformant Reading Systems and Services.  Rather, they are proofs-of-concept, demonstrations that the protocol can support a particular function.  For example, test 14.3 "Pre-requisite book" states:

  Search for the second or third book of a series, where the previous book was never issued. The Service should, in the dynamic menus, inform the user of the previous book.

This only applies to Services that support dynamic menus, searching and have the optional function of tracking a User's previous selections and making suggestions.  Not all Services are expected to do this.

= Requirements =

== 1. Efficient use of bandwidth ==

_Example of how this should be filled out_

*Partially fulfilled*

[RequirementsDocument#Efficient_use_of_bandwidth Requirement]

Content transfer usually takes place over HTTP, which is sufficient for transfer of data over the World Wide Web.  The Service creates minimal overhead.

Transfer of audio from the Reading System to the Service takes place over SOAP without MTOM, which adds roughly 37% more to transmission time.

  # *Download content*: Use a Service to find and download an entire Content item.  Ensure that the Content is downloaded in a reasonable amount of time.
  # *Protocol overhead*: In a typical session, measure the ratio of bytes transferred for messages (i.e., over SOAP) vs. bytes transferred for Content (i.e., over plain HTTP/HTTPS).
  # *Audio response*: Send an audio response to a dynamic menu item that supports it.  Ensure that the audio is uploaded in a reasonable amount of time.

|| Test case || Client || Server || Result || Details ||
|| 1.1 || CNIB || !PratSam || *Success* || Transfer of data was at expected rates for binary transfer over the Internet.  A 119 MB book was downloaded in 26 minutes. ||
|| 1.1 || XXX || YYY || *Success* || Transfer of data was at expected rates for binary transfer over the Internet.  An X MB book was downloaded in Y minutes. ||
|| 1.2 ||  ||  ||  ||  ||
|| 1.3 || XXX || YYY || *Failure* || Transfer of data was at X% efficiency compared to binary transfer.  Audio of Y MB was uploaded in Z minutes. ||

== 2. Key authorization ==

*Partially fulfilled*

[RequirementsDocument#Key_authorization Requirement]

Authorization occurs by User, not by Reading System; credentials are user names and passwords, not encryption keys. Service Providers intending to authorize Content by individual Reading System will need to use some other mechanism, such as PDTB2.

  # *Connect with authorization*: Initialize a session with a Service using correct user credentials.
  # *Deny incorrect authorization*: Attempt to initialize a session with a Service using a valid user name, but an incorrect password.  The Service must respond `false` to the `logOn` operation, and return a `NoActiveSession` fault to subsequent operation calls.
  # *Allow content download with correct credentials*: Download a resource with basic authentication credentials provided by the Service.
  # *Deny content download with incorrect credentials*: Attempt to download a resource with incorrect basic authentication credentials.  The file server must respond with an HTTP status of "403 Forbidden".

|| Test case || Client || Server || Result || Details ||
|| 2.1 ||  ||  ||  ||  ||
|| 2.2 ||  ||  ||  ||  ||
|| 2.3 ||  ||  ||  ||  ||
|| 2.4 ||  ||  ||  ||  ||

== 3. Transmit bookmarks ==

*Partially fulfilled*

[RequirementsDocument#Transmit_bookmarks Requirement]

The protocol does not support bookmarks with audio notes.

Note: Storing user-created bookmarks is covered under requirement #13, Bookmark stored on server.

  # *Retrieve a service provider-created bookmark*: Use `getBookmarks` to retrieve a list of predefined bookmarks from a Service.

|| Test case || Client || Server || Result || Details ||
|| 3.1 ||  ||  ||  ||  ||

== 4. Return book ==

*Untested*

[RequirementsDocument#Return_book Requirement]

  # *Return a downloaded book*: Issue and download a Borrowable Content item (i.e. one that requires return) then perform the Reading System's return function.  The Service must return `true`.  Verify that the Content's resources have been removed from the Reading System.
  # *Return a streamed book*: Issue a Borrowable Content item and stream some part of it, then perform the Reading System's return function.  The Service must return `true`.  Verify that the Content's resources are not present on the Reading System.

|| Test case || Client || Server || Result || Details ||
|| 4.1 ||  ||  ||  ||  ||
|| 4.2 ||  ||  ||  ||  ||

== 5. Transmit capabilities ==

*Untested*

[RequirementsDocument#Transmit_capabilities Requirement]

  # *Set Reading System attributes*: Initialize a session with a Service.  Verify that the Reading System's attributes were sent to the Service.
  # *Adapt Service to the Reading System's capabilities*: Initialize a session with a Service that provides different Content based on the capabilities of the Reading System.  Ensure that the Content and resources offered by the Service are only in the formats given in the `readingSystemAttributes` provided to the Service.

|| Test case || Client || Server || Result || Details ||
|| 5.1 ||  ||  ||  ||  ||
|| 5.2 ||  ||  ||  ||  ||

== 6. Universal protocol ==

*Untested*

[RequirementsDocument#Universal_protocol Requirement]

  # *Full session*: Perform a full session, from `logOn` to `logOff`.  (This test should be performed with as many combinations of clients and servers as possible.)

|| Test case || Client || Server || Result || Details ||
|| 6.1 ||  ||  ||  ||  ||

== 7. Player stores contact information ==

*N/A*

[RequirementsDocument#Player_stores_contact_information Requirement]

The requirement states that the Reading System must store the Service's contact information.  This is not a requirement as much as it is a declaration that Service Discovery is out of scope.

== 8. Content at different location ==

*Untested*

[RequirementsDocument#Content_at_different_location Requirement]

  # *Public remote content*: Issue a Content item which is hosted on a public server that is not affiliated with the Service Provider and does not require authentication.  Download the Content.
  # *Private remote content*: Issue a Content item which is hosted on a public server that is not  at the same host as the Service and requires basic authentication.  Download the Content.

|| Test case || Client || Server || Result || Details ||
|| 8.1 ||  ||  ||  ||  ||
|| 8.2 ||  ||  ||  ||  ||

== 9. Time interrogation ==

*Partially fulfilled*

[RequirementsDocument#Time_interrogation Requirement]

The ability for Reading Systems to query the Service for the current time was not included in the protocol.  The protocol can provide a due date for Content, and can provide a list of expired Content.

  # *Due date*: Retrieve a Content item with a "return by" attribute.  Ensure the date is rendered to the User.
  # *Expired content*: Let some borrowed Content expire.  Ensure that it is present on the `expired` Content list.

|| Test case || Client || Server || Result || Details ||
|| 9.1 ||  ||  ||  ||  ||
|| 9.2 ||  ||  ||  ||  ||

== 10. Download and streaming ==

*Untested*

[RequirementsDocument#Download_and_streaming Requirement]

  # *Download content*: Issue and download a Content item.
  # *Stream content*: Issue a Content item and stream some part of it.

|| Test case || Client || Server || Result || Details ||
|| 10.1 ||  ||  ||  ||  ||
|| 10.2 ||  ||  ||  ||  ||

== 11. Key delivery ==

*Untested*

[RequirementsDocument#Key_delivery Requirement]

  # *Identify protected Content*: Find a Protected DTB on the Service.  Get the DTB's metadata.  There must be a meta element with a name attribute of "`pdtb2:specVersion`" and a content attribute of "`2005-1`".
  # *Get a key*: Issue and download a Protected DTB.  Request a Key Exchange Object (KXO) for the decryption key from the Service using `getKeyExchangeObject`.  Render the DTB.
  # *Deny a key*: Issue and download a Protected DTB.  Request a KXO for the decryption key from the Service using `getKeyExchangeObject`, but do not provide an authorized key in the `keyRing` argument.  The Service must reply with an `invalidOperation` fault.

|| Test case || Client || Server || Result || Details ||
|| 11.1 ||  ||  ||  ||  ||
|| 11.2 ||  ||  ||  ||  ||
|| 11.3 ||  ||  ||  ||  ||

== 12. Same book, different player ==

*Untested*

[RequirementsDocument#Same_book,_different_player Requirement]

  # *Multiple downloads*: Issue and download a Content item from a Service that allows multiple downloads of the same Content.  Download the same Content item onto another Reading System.
  # *Pick up where you left off*: Issue and download a Content item.  Render the Content up to some point, create a bookmark there and transmit it to the Service.  Return the Content item.  Download the same Content item onto another Reading System.  Get the bookmarks for the Content item.  Start rendering the Content at the point where the bookmark was set earlier.

|| Test case || Client || Server || Result || Details ||
|| 12.1 ||  ||  ||  ||  ||
|| 12.2 ||  ||  ||  ||  ||

== 13. Bookmark stored on server ==

*Partially fulfilled*

[RequirementsDocument#Bookmark_stored_on_server Requirement]

The protocol does not support bookmarks with audio notes.

  # *Store and retrieve a user-created bookmark*: Create a bookmark for a Content item.  Use `setBookmarks` to transmit the bookmark to a Service.  Use `getBookmarks` to retrieve the bookmark from the Service.

|| Test case || Client || Server || Result || Details ||
|| 13.1 ||  ||  ||  ||  ||

== 14. Issue content ==

*Untested*

[RequirementsDocument#Issue_content Requirement]

  # *Issue a book*: Request a Content item from a Service using `issueContent`.  The Service must return `true`.  Get the list of resources using `getContentResources`.
  # *Deny a book*: Request a Content item from a Service using `issueContent`.  The Service must return `false`.  Try to get the list of resources using `getContentResources`.  The Service must return an `invalidOperation` fault.
  # *Pre-requisite book*: Search for the second or third book of a series, where the previous book was never issued.  The Service should, in the dynamic menus, inform the user of the previous book.

|| Test case || Client || Server || Result || Details ||
|| 14.1 ||  ||  ||  ||  ||
|| 14.2 ||  ||  ||  ||  ||
|| 14.3 ||  ||  ||  ||  ||

== 15. Audio and text annotation ==

*Untested*

[RequirementsDocument#Audio_and_text_annotation Requirement]

  # *Annotated Content list*: Retrieve a Content list with several items from a Service using `getContentList`.  Each item must have a label with both text and audio.

|| Test case || Client || Server || Result || Details ||
|| 15.1 ||  ||  ||  ||  ||

== 16. Stop and resume download ==

*Untested*

[RequirementsDocument#Stop_and_resume_download Requirement]

  # *Stop and resume*: Issue a Content item from a Service and get its resource list.  Download part of one file, then stop.  Drop the HTTP connection, then reconnect.  Resume the download, using the HTTP Range header to download only the remaining part of the file.  Download the same file in its entirety and verify that they match.

|| Test case || Client || Server || Result || Details ||
|| 16.1 ||  ||  ||  ||  ||

== 17. Dynamic menus ==

*Untested*

[RequirementsDocument#Dynamic_menus Requirement]

  # *Search for content*: Use the dynamic menus to search for a Content item by title.
  # *Browse for content*: Use the dynamic menus to browse the Service's collection by categories provided by the Service.
  # *Survey*: Use the dynamic menus to answer a survey form provided by the Service.

|| Test case || Client || Server || Result || Details ||
|| 17.1 ||  ||  ||  ||  ||
|| 17.2 ||  ||  ||  ||  ||
|| 17.3 ||  ||  ||  ||  ||

== 18. Noninteractive session ==

*Untested*

[RequirementsDocument#Noninteractive_session Requirement]

  # *Synchronize downloaded content*: Verify the following can be done as a single Reading System function without user interaction between steps:
    # Return a list of Content items selected by the User, then
    # Return the Content items in the "expired" Content list, then
    # Issue all the items in the "new" Content list, then
    # Download all Content in the "issued" Content list that is not already on the Reading System.
  # *Synchronize streaming content*: Verify the following can be done as a single Reading System function without user interaction between steps:
    # Return a list of Content items selected by the User, then
    # Return the Content items in the "expired" Content list, then
    # Issue all the items in the "new" Content list.

|| Test case || Client || Server || Result || Details ||
|| 18.1 ||  ||  ||  ||  ||
|| 18.2 ||  ||  ||  ||  ||

== 19. Prioritize order of files ==

*Untested*

[RequirementsDocument#Prioritize_order_of_files Requirement]

  # *Play a book while downloading*: Issue a DAISY 2.02 or Z39.86 book that includes audio from the Service.  Identify and download the XML files, then identify and download the audio in play order.  Begin playback of audio before it has fully downloaded.

|| Test case || Client || Server || Result || Details ||
|| 19.1 ||  ||  ||  ||  ||

== 20. Interact with content ==

*Untested*

[RequirementsDocument#Interact_with_content Requirement]

Note that actually interacting with the Content without downloading all of its resources is covered under 10.2 Stream content.  The user story "Review content before selection" is tested here.

  # *Sample content*: Download the sample of a Content item without issuing the Content.

|| Test case || Client || Server || Result || Details ||
|| 20.1 ||  ||  ||  ||  ||

== 21. Report firmware version ==

*Untested*

[RequirementsDocument#Report_firmware_version Requirement]

  # *Report firmware version*: Initialize a session with a Service.  Verify that the Reading System's firmware version was sent to the Service.  (Note: this is a subset of test 5.1 Set Reading System attributes.)

|| Test case || Client || Server || Result || Details ||
|| 21.1 ||  ||  ||  ||  ||

== 22. Report download activity ==

*Not fulfilled*

[RequirementsDocument#Report_download_activity Requirement]

The capability for a Reading System to report its own download activity to the Service was not included in the protocol.  Service Providers may track this information for local Content by monitoring their own file servers, and may need to require Service Delegates to report download activity.

== 23. Report player errors ==

*Not fulfilled*

[RequirementsDocument#Report_player_errors Requirement]

The capability for a Reading System to report errors to the Service was not included in the protocol.

== 24. Report which server is in control ==

*Not fulfilled*

[RequirementsDocument#Report_which_server_is_in_control Requirement]

The capability to report which server is in control was not included in the protocol.

== 25. Protect user privacy ==

*Untested*

[RequirementsDocument#Protect_user_privacy Requirement]

  # *Invalidate session IDs on logOff*: Initialize a session, then log off.  Call some operations (other than `logOn`); the Service must respond with a `NoActiveSession` fault.
  # *Secure Service*: Initialize a session with a Service over HTTPS.
  # *Secure Content*: Retrieve Content resources over HTTPS.

|| Test case || Client || Server || Result || Details ||
|| 25.1 ||  ||  ||  ||  ||
|| 25.2 ||  ||  ||  ||  ||
|| 25.3 ||  ||  ||  ||  ||

== 26. Localized, plain language error messages ==

*Untested*

[RequirementsDocument#Localized,_plain_language_error_messages Requirement]

  # *Localized error messages*: Deliberately cause a fault (such as trying to get resources for a Content item that is not issued).  Ensure that the error rendered by the Reading System is localized to the User's language and is plainly explained.  (Note: This test should be repeated by causing the same fault, but with different localizations.)

|| Test case || Client || Server || Result || Details ||
|| 26.1 ||  ||  ||  ||  ||

= Expectations =

== 27. Audio feedback ==

*Untested*

[RequirementsDocument#Requires_some_player_functionality Requirement] (never formally moved back in scope)

Sending audio from the Reading System to the Service was originally in scope, then declared out of scope, then was brought back into the specification.

  # *Audio feedback*: Transmit audio as a response to a dynamic menu item that accepts it.  Verify that the audio was received by the Service.

|| Test case || Client || Server || Result || Details ||
|| 27.1 ||  ||  ||  ||  ||

== 28. Download tracking ==

Although reporting download activity is not part of the protocol, certain organizations still need to track it.  This can usually be done on the file server, using standard logging tools.

  # *Track downloads*: Connect to a Service, then issue and download a Content item.  Verify that file downloads were logged by the Service Provider.

|| Test case || Client || Server || Result || Details ||
|| 28.1 ||  ||  ||  ||  ||

= Conclusion =

Of the 26 in-scope requirements, X were fulfilled and Y were partially fulfilled.  Z requirements were left unfulfilled, largely due to time constraints.